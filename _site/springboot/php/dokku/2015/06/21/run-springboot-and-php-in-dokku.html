<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Run SpringBoot and PHP in Dokku</title><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><!-- Place favicon.ico and apple-touch-icon(s) in the root directory --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css><!-- Optional theme --><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css><link rel=stylesheet href=/css/main.d7dd.css><script src=/js/head-scripts.32fa.js></script><script src=https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><div class=blog-masthead><div class=container><nav class=blog-nav><a class=blog-nav-item href="/">Home</a> <a class=blog-nav-item href=/about.html>About</a> <a class=blog-nav-item href=/blogs.html>Blogs</a> <a class=blog-nav-item href=/projects.html>Projects</a> <a class=blog-nav-item href=/resume.html>Resume</a></nav></div></div><div class=container><div class=blog-header><h1 class=blog-title>Gregory Lawson</h1><p class="lead blog-description">Welcome to Gregory Lawson IO!</p></div><div class=row><div class="col-sm-8 blog-main"><article class=post><h2 id=run-springboot-and-php-in-dokku>Run SpringBoot and PHP in Dokku</h2><p>June 21, 2015 by <a href=/about.html>Gregory Lawson</a></p><p>I was recently tasked with providing data to Android application that was an extension of an existing PHP application. The PHP application is backed by a MySQL database with a hosting service. I decided to create RESTful apis in my language of choice which was Java. In order to achieve this , I decided I needed to deploy a Java app along with a PHP app on the same machine. Two Paas services immediately came to mind, <a href="https://www.heroku.com/">Heroku</a> and <a href=https://www.openshift.com>Openshift</a>. Both of these Paas have deployment models based on pushing files to git, a natural choice for developers of small apps. I chose Heroku because its support for Java included allowing the developer to choose how the jvm is invoked. You specify “java -jar, etc” and Heroku will execute. This allows for the flexibility on what Java apps, code can be run, but does not allow control of the machine hosting the application.</p><p>Introduce <a href=http://progrium.viewdocs.io/dokku/index>Dokku</a>, a lightweight version of Heroku that can be run on one system. You can download Dokku and run it on Ubuntu. You can also choose a droplet from <a href=https://www.digitalocean.com>Digital Ocean</a> with Dokku already installed. I chose Digital Ocean along with a preconfigured system with Dokku installed. Directions for setting up Dokku can be found <a href=https://www.digitalocean.com/community/tutorials/how-to-use-the-dokku-one-click-digitalocean-image-to-run-a-node-js-app>here</a>.</p><p>With a machine configured with Dokku on Digital Ocean, I am able to deploy two apps and a database with 2 GB of RAM. If you create the Dokku git remote, you can push your PHP app to that directory with a subdomain. As long as there is an index.php in the root folder, Dokku should recognize that this is a PHP app and start the appropriate service pointing to your root directoty. Because I used MySQL, I followed the instructions <a href=https://github.com/hughfletcher/dokku-mysql-plugin>here</a> to install MySQL as well. After MySQL installation , I had to run an appropriate DDL for table creation and population. I was able to get a dump file from hosting service the PHP app originated. If all goes well, you should have a fully configured PHP app should be served from the app name given in your Dokku remote git add.</p><?prettify lang=sh?><pre class=prettyprint>
export MULE_HOME=/path/to/unzipped/Mule/distribution
</pre><p>Download the project. The complete source code and Github project can be found <a href=https://github.com/glawson6/activemq-mule-embedded>here</a>.</p><p>Run:</p><?prettify lang=sh?><pre class=prettyprint>
mvn clean install
</pre><p>This will build, package, and copy the Mule zip file to the MULE_HOME apps directory.</p><p>Start another terminal or shell and navigate to MULE_HOME/bin directory and issue the command:</p><?prettify lang=sh?><pre class=prettyprint>
./mule
</pre><p>This will start Mule and the embedded instance of ActiveMQ. I have included a flow in the project to verify that the ActiveMQ broker was created along with a destination called queue1. There is a small application used to send a single message to the destination defined in the embedded broker.</p><p>Get another shell/terminal and navigate to the project directory and issue the command:</p><?prettify lang=sh?><pre class=prettyprint>
mvn exec:java
</pre><p>After issuing this command, you should see a log message from the client. <img class="side-image img-responsive" src=/img/terminal-activemq-embedded-client.afb6.png alt="Terminal Client Sending Message"></p><p>There should be a corresponding log message on the Mule side for receiving the JMS message. <img class="side-image img-responsive" src=/img/terminal-activemq-embedded-mule.8fdb.png alt="Terminal Mule Response"></p><p>Congratulations! You just embedded ActiveMQ inside Mule server, sent a message to ActiveMQ and logged the message in a Mule application!</p><h4 id=further-reading>Further reading</h4><ul><li><a href=http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html>How do I embed a Broker inside a Connection</a></li><li><a href=http://activemq.apache.org/topologies.html>ActiveMQ Topologies</a></li><li><a href=http://www.mulesoft.org/mule-activemq-integration-examples>ActiveMQ/Mule Integeration Examples</a></li></ul><p>*<a href=https://www.andrewmunsell.com/blog/dokku-tutorial-digital-ocean>Deploying the Right Way: Dokku on Digital Ocean</a> *[]()</p></article><div class=blog-post></div></div><!-- /.blog-main --><div class="col-sm-3 col-sm-offset-1 blog-sidebar"><div class="sidebar-about sidebar-module sidebar-module-inset"><img class="side-image img-responsive" src=/img/me_purple_shirt.8b9d.jpeg alt="Gregory Lawson"><h2>About</h2><p>I am a:</p><p>Software Architect/Engineer</p><p>I work with:</p><p>-Enterprise Integration Tools</p><p>-Front-End Web Technologies</p></div><div class=text-center><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-8900501214767896 data-ad-slot=5563476365></ins></div><div class=sidebar-module><h4>Posts</h4><a href=/springboot/php/dokku/2015/06/21/run-springboot-and-php-in-dokku.html>Run SpringBoot and PHP in Dokku</a> <a href=/activemq/mule/2015/05/17/run-activemq-embedded-in-mule.html>Run ActiveMQ Embedded in Mule</a> <a href=/spring/mule/2015/04/22/using-spring-boot-with-mule.html>Using Spring Boot With Mule</a></div><div class=sidebar-module><h4>My Links</h4><ol class=list-unstyled><li><a href=http://daringfireball.net/projects/markdown/syntax>Markdown Syntax</a></li><li><a href="http://jekyllrb.com/">Jeckyll</a></li><li><a href=https://spring.io/guides/gs/spring-boot>Spring Boot Getting Started</a></li><li><a href=https://github.com/glawson6/mule-starter-app>Mule Spring Boot Starter</a></li></ol></div><div class=sidebar-module><h4>Elsewhere</h4><ol class=list-unstyled><li><a href=https://github.com/glawson6>GitHub</a></li><li><a href=https://www.linkedin.com/in/gregorylawsontaptech>LinkedIn</a></li><li><a href=https://profiles.generalassemb.ly/gregory-lawson>General Assembly</a></li></ol></div></div><!-- /.blog-sidebar --></div><!-- /.row --></div><!-- /.container --><footer class=blog-footer><p>Gregory Lawson</p><p><a href=#>Back to top</a></p><div class=container><div class=text-center></div></div></footer><!--
<script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script>
--><script src=/js/script.7b55.js></script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. --><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-XXXXX-X');ga('send','pageview');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></body></html>